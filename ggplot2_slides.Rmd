---
title: Gráficos con ggplot2
subtitle: Source Stat Lab Ec (SSL)
author: Alex Efrén Pérez Tatamués
date: Febrero, 2015
output:
  ioslides_presentation:
    logo: logo_source.jpg
    smaller: yes
    transition: slower
    widescreen: yes
    slidy_presentation: default
---

## Sistemas gráficos de R
Actualmente R maneja tres tipos de sistemas de gráficos estadísticos, entre ellos el "base", "lattice", "ggplot2".

## Sistema gráfico base
Se basa en la utilización de los paquetes:

* graphics. Funciones gráficas `hist()`, `plot()`, etc.
* grDevices. Funciones de dispositivos gráficos `pdf()`, `png()`, etc.

Características:

* Modelo __paleta de artista__
 - Crear lienzo del gráfico
 - Añadir elementos utilizando las funciones `lines()`, `points()`, etc.
 
* Muy intuitivo
* No posee un lenguaje gráfico estándar 
* Llamado de varias funciones (códigos extensos)
* Una vez empezado el gráfico no es posible volver al inicio
* Permite fijar inicialmente layouts (margenes, espacios, etc) a través de la función `par()`

## Ejemplo
```{r, fig.width=5, fig.height= 4.5, fig.align='center'}
with(airquality, plot(Wind, Ozone, main = "Ozone vs Wind", type = "n"))
with(subset(airquality, Month <= 6), points(Wind, Ozone, col = "red", pch=16))
with(subset(airquality, Month > 6), points(Wind, Ozone, col = "blue", pch=16))
model <- lm(Ozone ~ Wind, airquality)
abline(model, lwd = 1, col= "green")
legend("topright", pch = 16, col = c("blue", "red"),legend = c("Semestre 2", "Semestre 1"))
```

## Facetas
```{r, fig.width=7.5, fig.height= 3.5, fig.align='center'}
par(mfrow=c(1,2))
with(subset(airquality, Month <= 6), 
     plot(Wind, Ozone, col = "red", pch=16, main="Semestre 1"))
model1 <- lm(Ozone ~ Wind, subset(airquality, Month <= 6))
abline(model1, lwd = 1, col= "green")

with(subset(airquality, Month > 6), 
     plot(Wind, Ozone, col = "blue", pch=16, main="Semestre 2"))
model2 <- lm(Ozone ~ Wind, subset(airquality, Month > 6))
abline(model2, lwd = 1, col= "green") 
```


## Sistema gráfico lattice

Se basa en la utilización de los paquetes:

* lattice. Funciones gráficas `xyplot()`, `bwplot()`, etc.
* grid. Para gráficos condicionados (facetas).

Características:

* No es muy intuitivo
* Llamado de una sola función.
* Layouts (margenes, espacios, etc) se fijan automáticamente

## Ejemplo

```{r, fig.width=7.5, fig.height= 3.5, fig.align='center'}
library(lattice)
airquality <- transform(airquality, Month = as.factor (Month))
graf <- xyplot(Ozone~Wind | Month, data = airquality, layout=c(5,1),
               panel = function(x, y){
               panel.xyplot(x, y, pch=16)
               panel.lmline(x, y, col = "green")})
print(graf)
```

## Sistema de gráficos ggplot2

ggplot2 es el sistema de gráficos resultante de la combinación de las características del sistema **base** y del sistema **lattice**.
Fue desarrollado por Hadley Wickham (<http://had.co.nz/>) como una implementación de la __grámatica de gráficos__ (_Grammar of Graphics_) propuesta por Leland  Wilkinson.

<br>
<div align=center> <b> <font color=SteelBlue face=Cambria size=8> base + lattice = ggplot2 </font> </b> </div>

<br>
ggplot2 se encuentra disponible en <http://cran.r-project.org/web/packages/ggplot2/index.html>, y se puede instalar directamente ejecutando la linea de código siguiente.

<br>
```{r, eval=FALSE}
install.packages("ggplot2", dependencies=TRUE)
library(ggplot2)
```

## Gramática de gráficos.






















